FROM huodon/pytorch-devcontainer:121

USER vscode

ENV PATH=:/home/vscode/.local/bin:$PATH
WORKDIR /app



COPY ./docker/install.sh .

RUN bash ./install.sh

RUN pip install --no-cache-dir -r \
  https://raw.githubusercontent.com/ltdrdata/ComfyUI-Impact-Pack/Main/requirements.txt; \
  pip install --no-cache \
  ultralytics \
  openmim \
  opencv-python

RUN pip install --no-cache-dir -r \
  https://raw.githubusercontent.com/ltdrdata/ComfyUI-Inspire-Pack/main/requirements.txt


RUN pip install --no-cache-dir -r \
  https://raw.githubusercontent.com/Fannovel16/comfyui_controlnet_aux/main/requirements.txt

RUN pip install --no-cache-dir -r \
  https://raw.githubusercontent.com/ltdrdata/ComfyUI-Impact-Pack/Main/requirements.txt

RUN pip install --no-cache-dir -r \
  https://raw.githubusercontent.com/ltdrdata/ComfyUI-Manager/main/requirements.txt

RUN pip install --no-cache-dir -r \
  https://raw.githubusercontent.com/LucianoCirino/efficiency-nodes-comfyui/main/requirements.txt

# ComfyUI
RUN pip install --no-cache-dir -r \
  https://raw.githubusercontent.com/comfyanonymous/ComfyUI/master/requirements.txt

